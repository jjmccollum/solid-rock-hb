%Declare the package that this file will produce, along with its formal name:
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{mwe}[2020/03/13 Minimal Working Example]

%Include support for multi-column text layout:
\RequirePackage{multicol}
\raggedcolumns

%Include support for getting first and last marks:
\RequirePackage{extramarks}

%Define a macro that will be redefined with the current book title whenever it changes (for reference in the header):
\newcommand{\BookTitle}{}

\newcommand{\Book}[1]{%
	%Set the page style:
	\pagestyle{BookPage}%
	%Set the current book title:
	\renewcommand{\BookTitle}{#1}%
	%Reset the left (= chapter) and right (= verse) marks:
	\markboth{1}{1}%
}
\newcommand{\PreChapterSpace}{% adds (breakable) space before a new chapter marker
	\hspace{0.5em}
}
\newcommand{\Chapter}[1]{%
	%Set the current left (= chapter) mark and reset the right (= verse) mark:
	\markboth{#1}{1}%
	%Then typeset the chapter number:
	{\textbf{#1\,:\,}}%
}
\newcommand{\PreVerseSpace}{% adds (breakable) space before a new verse marker
	\hspace{0.5em}
}
\newcommand{\Verse}[1]{%
	%Set the current right (= verse) mark:
	\markright{#1}%
	%Then typeset the verse number:
	{\textbf{#1}}\hspace*{0.5em}
}

%Macro for collapsing reference ranges as needed:
\RequirePackage{ifthen}
\newcommand{\RefRange}{%
	%Check if the first chapter matches the last chapter on the page:
	\ifthenelse{\equal{\firstleftmark}{\lastleftmark}}{%
		%If the chapters match, then check if the first verse matches the last verse on the page:
		\ifthenelse{\equal{\firstrightmark}{\lastrightmark}}{%
			%If the verses match, then the page consists of a single verse; use its reference:
			\firstleftmark:\firstrightmark%
		}{%
			%If the verses do not match, then use one chapter and the verse range:
			\firstleftmark:\firstrightmark--\lastrightmark%
		}%
	}{%
		%If the chapters do not match, then use the entire reference range:
		\firstleftmark:\firstrightmark--\lastleftmark:\lastrightmark%
	}%
}

%Page style:
\makepagestyle{BookPage}
\makeevenhead{BookPage}{\RefRange}{\BookTitle}{}
\makeevenfoot{BookPage}{\thepage}{}{} %Page number on left in footer on even pages
\makeoddhead{BookPage}{}{\BookTitle}{\RefRange}
\makeoddfoot{BookPage}{}{}{\thepage} %Page number on right in footer on odd pages

%Define a macro to generate consecutive verses of sample text:
\newcounter{i}
\newcommand{\blindtext}[1]{%use a default value of 1 to coerce the argument to a number
	\setcounter{i}{1}%
	\loop%
	\Verse{\thei}In the beginning, God created the heavens and the earth.\PreVerseSpace{}%
	\stepcounter{i}%
	\ifnum\numexpr\value{i}-1<#1%
	\repeat%
}

%Finally, close the input:
\endinput